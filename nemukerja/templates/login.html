{% extends "base.html" %}

{% block title %}Sign In - NemuKerja{% endblock %}

{% block content %}
<div class="container-compact">
<div class="wrap">
    <div class="img" style="background-color: #ffffff; height: 150px; display: flex; justify-content: center; align-items: center;">
        <img src="{{ url_for('static', filename='images/banner.png') }}" style="width: 450px; height: 150px;">
    </div>

    <h2>Sign In</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('login') }}">
        {{ form.hidden_tag() }}

        <div class="form-group mt-3">
            {{ form.email(class="form-control", id="email", placeholder="Enter your email") }}
        </div>

        <div class="form-group mt-3">
            <div class="input-group">
                {{ form.password(class="form-control", id="login_password", placeholder="Enter your password") }}
                <span class="input-group-text" onclick="togglePassword('login_password')">
                    <i class="fa fa-eye" id="eye-login_password"></i>
                </span>
            </div>
        </div>

        <div class="form-group mt-3">
            <div class="form-check">
                {{ form.remember(class="form-check-input", id="remember") }}
                <label class="form-check-label" for="remember">
                    Remember me 
                </label>
            </div>
        </div>

        <div class="form-group mt-4">
            {{ form.submit(class="btn btn-primary form-control") }}
        </div>

        <div class="mt-3 text-center">
            <p>Don't have an account? <a href="{{ url_for('register') }}">Sign Up</a></p>
            <p>Forgot password? <a href="{{ url_for('reactivate') }}">Reactivate Account</a></p>
        </div>
    </form>
</div>
</div>
<script>
function togglePassword(id) {
    var pwd = document.getElementById(id);
    var eye = document.getElementById('eye-' + id);
    if (pwd.type === 'password') {
        pwd.type = 'text';
        eye.classList.remove('fa-eye');
        eye.classList.add('fa-eye-slash');
    } else {
        pwd.type = 'password';
        eye.classList.add('fa-eye');
        eye.classList.remove('fa-eye-slash');
    }
}

document.addEventListener('DOMContentLoaded', function() {

    const emailField = document.getElementById('email');
    const passwordField = document.getElementById('login_password');

    if (emailField && passwordField && emailField.value === '') {
        
        emailField.value = 'user@example.com';
        passwordField.value = 'password';
    }
});
</script>

<style>
.wrap {
    max-width: 400px;
    margin: 50px auto;
    padding: 30px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
}

.form-check {
    display: flex;
    align-items: center;
}

.form-check-input {
    margin-right: 10px;
}

.btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    padding: 12px;
    font-weight: 600;
}

.btn-primary:hover {
    background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
    transform: translateY(-1px);
}

.form-control:focus {
    border-color: #007bff;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}
</style>
{% endblock %}